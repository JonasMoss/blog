<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.0.36">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Jonas Moss">

<title>Jonas Moss’ blog - No one would have invented coefficient alpha today</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Jonas Moss’ blog</span>
  </a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html">About</a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/JonasMoss"><i class="bi bi-github" role="img">
</i> 
 </a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">No one would have invented coefficient alpha today</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">statistics</div>
                <div class="quarto-category">psychometrics</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Jonas Moss </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">Oct 2, 2022</p>
      </div>
    </div>
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<p>Coefficient alpha is the most famous coefficient in psychometrics – Cronbach’s paper <em><a href="https://scholar.google.no/scholar?hl=en&amp;as_sdt=0%2C5&amp;q=Coefficient+alpha+and+the+internal+structure+of+tests&amp;btnG=">Coefficient alpha and the internal structure of tests</a></em> has been cited around <span class="math inline">\(60,00\)</span> times after all. It’s supposed to measure <em>reliability</em>. What does that mean? Intuitively, a psychometric scale is supposed to measure some kind of psychological construct, such as intelligence, in a reliable way. You don’t want it to be noisy. You don’t want two intelligence tests administered at slightly different times to give widely different results. You also want the test to actually measure intelligence, and not something else, such emotionality. But that’s validity, not reliability.</p>
<p>In classical test theory they think about psychometric tests in the context of a true score <span class="math inline">\(T\)</span> and observed score <span class="math inline">\(X\)</span>. Then they write <span class="math inline">\(X = T +\epsilon\)</span> for some error term <span class="math inline">\(\epsilon\)</span>. (This is always possible). For instance, if <span class="math inline">\(X\)</span> is the observed score on an IQ test, <span class="math inline">\(T\)</span> is the true, underlying intelligence.</p>
<p>Now we’re ready to define classical reliability! The reliability is defined as <span class="math inline">\(R=\text{Cor}(X, T)^2\)</span>, the squared correlation between the true score and the observed score. That’s a pretty reasonable definition! But the problem is that you don’t know the true score, so you can’t estimate this correlation directly.</p>
<p>And that’s where coefficient alpha comes in. Suppose that <span class="math inline">\(X\)</span> is a <em>sum score</em>, i.e., on the form <span class="math inline">\(X = X_1 + X_2 + \ldots + X_k\)</span>. Then assume that <span id="eq-congeneric"><span class="math display">\[X_i = \mu_i + \lambda_i T + \sigma_i \epsilon_i \tag{1}\]</span></span> for some error terms with variance equal to <span class="math inline">\(1\)</span>. In addition, assume that <span class="math inline">\(\text{Cov}(\epsilon_i, \epsilon_j) = 0\)</span> when <span class="math inline">\(i = j\)</span>, i.e., the error terms are uncorrelated. Then <span class="math inline">\(X\)</span> follows the <em>congeneric measurement model</em>. Now define coefficient alpha as <span class="math display">\[\alpha=\frac{k}{k-1}\left(1-\frac{\text{tr}\Sigma}{{1}^{T}\Sigma{1}}\right),\]</span> where <span class="math inline">\(\Sigma\)</span> is the covariane matrix of the <span class="math inline">\(X_i\)</span>s. This alpha has two important properties:</p>
<ol type="1">
<li>When the congeneric measurement model holds, <span class="math inline">\(R\geq \alpha\)</span>.In other words, <span class="math inline">\(\alpha\)</span> is a lower bound for the true reliability.</li>
<li>If, in addition, if the true model is <span class="math inline">\(\tau\)</span>-equivalent, then <span class="math inline">\(R = \alpha\)</span>.</li>
</ol>
<p>The condition of <span class="math inline">\(\tau\)</span>-equivalence means that all the factor loadings <span class="math inline">\(\lambda_i\)</span> are equal, i.e., the congeneric model <a href="#eq-congeneric">eq.&nbsp;1</a> is reduced to <span id="eq-tau-equivalent"><span class="math display">\[X_i = \mu_i + \lambda T + \sigma_i \epsilon_i. \tag{2}\]</span></span> There is widespread agreement that <span class="math inline">\(\tau\)</span>-equivalence never holds.</p>
<p>Alpha is also the mean of all possible split-half reliabilities, but no one seem to care much about that today. It might have been important earlier on though. For more details see <span class="citation" data-cites="Cho2021-gk">(<a href="#ref-Cho2021-gk" role="doc-biblioref">Cho 2021</a>)</span>.</p>
<section id="why-no-one-would-have-invented-alpha-today" class="level2">
<h2 class="anchored" data-anchor-id="why-no-one-would-have-invented-alpha-today">Why no one would have invented alpha today</h2>
<p>Take a look at the congeneric model (<a href="#eq-congeneric">eq.&nbsp;1</a>) again. This is a linear one-factor model with no correlation among the errors. In the early 20th century, there was no feasible way to estimate such models, at least not for ordinary psychometric researchers. But that’s not the case anymore. Anyone able to install <code>R</code> and run the easiest <code>lavaan</code> script can estimate such a model. For example, we can estimate the parameters for the agreeableness part of the <code>psychTools::bfi</code> data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">"lavaan"</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="st">" f =~ A1 + A2 + A3 + A4 + A5 "</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>bfi <span class="ot">&lt;-</span> psychTools<span class="sc">::</span>bfi[, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>]</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>bfi[, <span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="sc">-</span>bfi[, <span class="dv">1</span>] <span class="co"># Reverse-coded question.</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>obj <span class="ot">&lt;-</span> lavaan<span class="sc">::</span><span class="fu">cfa</span>(model, <span class="at">data =</span> bfi, <span class="at">std.lv =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="fu">round</span>(<span class="fu">coef</span>(obj), <span class="dv">3</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped">
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: right;">x</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">f=~A1</td>
<td style="text-align: right;">0.528</td>
</tr>
<tr class="even">
<td style="text-align: left;">f=~A2</td>
<td style="text-align: right;">0.774</td>
</tr>
<tr class="odd">
<td style="text-align: left;">f=~A3</td>
<td style="text-align: right;">0.994</td>
</tr>
<tr class="even">
<td style="text-align: left;">f=~A4</td>
<td style="text-align: right;">0.717</td>
</tr>
<tr class="odd">
<td style="text-align: left;">f=~A5</td>
<td style="text-align: right;">0.791</td>
</tr>
<tr class="even">
<td style="text-align: left;">A1~~A1</td>
<td style="text-align: right;">1.693</td>
</tr>
<tr class="odd">
<td style="text-align: left;">A2~~A2</td>
<td style="text-align: right;">0.784</td>
</tr>
<tr class="even">
<td style="text-align: left;">A3~~A3</td>
<td style="text-align: right;">0.714</td>
</tr>
<tr class="odd">
<td style="text-align: left;">A4~~A4</td>
<td style="text-align: right;">1.694</td>
</tr>
<tr class="even">
<td style="text-align: left;">A5~~A5</td>
<td style="text-align: right;">0.965</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>The <code>std.lv = TRUE</code> argument forces the latent variable <span class="math inline">\(T\)</span> to have variance equal to <span class="math inline">\(1\)</span>. This option makes it easier to interpret the remaining parameters. Using the estimated parameters of the <code>lavaan</code> object we can estimate the reliabiltiy <span class="math inline">\(R\)</span> with little problems. Straight-forward calculations show that, when we assume the congeneric measurement model, <span id="eq-reliability"><span class="math display">\[R = \text{Cor}^{2}(X_1 + X_2+\cdots+X_k,T)=\frac{k\overline{\lambda}^{2}}{k\overline{\lambda}^{2}+\overline{\sigma^{2}}}, \tag{3}\]</span></span> where <span class="math inline">\(\overline{x}\)</span> denotes the mean of the vector <span class="math inline">\(x\)</span>.</p>
<p>Using this formulation of the reliability in terms of <span class="math inline">\(\lambda\)</span> and <span class="math inline">\(\sigma\)</span>, the natural estimator if the reliability is the <em>plug-in estimator</em> <span class="math display">\[\hat{R} = \frac{k\overline{\hat{\lambda}}^{2}}{k\overline{\hat{\lambda}}^{2}+\overline{\hat{\sigma}^{2}}},\]</span> where <span class="math inline">\(\hat{\lambda}\)</span> and <span class="math inline">\(\hat{\sigma}\)</span> are estimators of your choice. If you’re using <code>lavaan</code>, you would calculate it using something like the following function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">#' Estimate the reliability from a `lavaan` object.</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="co">#' </span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="co">#' Estimate the reliability assuming a congeneric measurement model using the</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co">#'   plug-in estimator.</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="co">#' @param obj A `lavaan` object.</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="co">#' @return The estimated reliability coefficient.</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>reliability <span class="ot">&lt;-</span> <span class="cf">function</span>(obj) {</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>  params <span class="ot">&lt;-</span> lavaan<span class="sc">::</span><span class="fu">lavInspect</span>(obj, <span class="at">what =</span> <span class="st">"coef"</span>)</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>  lambda <span class="ot">&lt;-</span> params<span class="sc">$</span>lambda</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>  sigma2 <span class="ot">&lt;-</span> <span class="fu">diag</span>(params<span class="sc">$</span>theta)</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>  k <span class="ot">&lt;-</span> <span class="fu">length</span>(lambda)</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>  k <span class="sc">*</span> <span class="fu">mean</span>(lambda) <span class="sc">^</span> <span class="dv">2</span> <span class="sc">/</span> (k <span class="sc">*</span> <span class="fu">mean</span>(lambda) <span class="sc">^</span> <span class="dv">2</span> <span class="sc">+</span> <span class="fu">mean</span>(sigma2))</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For the agreeableness data of <code>psychTools::bfi</code>, our reliability becomes</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">reliability</span>(obj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.712129</code></pre>
</div>
</div>
<p>It’s not hard to do inference for the reliability coefficient either – it is merely an application of the <a href="https://en.wikipedia.org/wiki/Delta_method">delta method</a>. Moreover, by the invariance principle of maximum likelihood estimation, it is the maximum likelihood estimator of the reliability provided <span class="math inline">\(\lambda\)</span> and <span class="math inline">\(\sigma\)</span> are estimated using maximum likelihood. In this sense the estimator is <em>natural</em>.</p>
<p>To sum up:</p>
<ol type="1">
<li>There exists a natural estimator of the reliability under the congeneric measurement model.</li>
<li>It is easy to estimate and it’s efficient under normality.</li>
<li>Its asymptotic theory is well-understood. That’s just a by-product of the immense amount of research on asymptotic theory for general structural equation models.</li>
</ol>
<p>I doubt anyone would have wanted to investigate alternatives to this 100% reasonable, simple, and efficient estimator. For why would they? It’s like finding an alternative estimator of the <span class="math inline">\(R^2\)</span> that requires a little less computation power but is only consistent for the <span class="math inline">\(R^2\)</span> under extraordinarily unlikely assumptions.</p>
<p>Maybe someone would have uncovered coefficient alpha today, but its discovery would be treated as a novelty, not something of widespread importance, worth <span class="math inline">\(60,000\)</span> citations.</p>



</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" role="doc-bibliography">
<div id="ref-Cho2021-gk" class="csl-entry" role="doc-biblioentry">
Cho, Eunseong. 2021. <span>“Neither Cronbach’s Alpha nor <span class="nocase">McDonald’s</span> Omega: A Commentary on Sijtsma and Pfadt.”</span> <em>Psychometrika</em> 86 (4): 877–86. <a href="https://doi.org/10.1007/s11336-021-09801-1">https://doi.org/10.1007/s11336-021-09801-1</a>.
</div>
</div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>