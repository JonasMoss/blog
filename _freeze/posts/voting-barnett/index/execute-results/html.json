{
  "hash": "6118c20d11c6b30e0bc124001645a27e",
  "result": {
    "markdown": "---\ntitle: \"When is it rational to vote? A comment on Barnett (2020)\"\nauthor: \"Jonas Moss\"\nformat: html\neditor: visual\ndraft: true\ncache: true\ndate: \"10/25/2022\"\nfreeze: auto\ndate-format: \"MMM D, YYYY\"\ncategories: [effective altruism, political science, rationalism]\nbibliography: bibliography.bib\n---\n\n\n## Summary\n\n1.  @Barnett2020-gq argues it's rational to vote in a two-candidate run-off if the social benefit of the preferred candidate winning is more than twice the cost of voting.\n2.  Barnett's conclusion goes against the standard binomial model, but that is OK! For the binomial model assumes independent voters and does not incorporate parameter incorporate uncertainty\n3.  A modified variant of Barnett's conclusion holds in the *beta-binomial model*, a model that generalizes the binomial model but does not assume independent voters. \nRoughly speaking, the closer we are to a binomial with $0.5$ success probability, the higher our incentives to vote.\n4.  I suggest modifying @Barnett2020-gq from \"vote if the social benefit is twice the cost of voting\" to \"vote if the social benefit is $1/5$th the cost of voting$, in close races. The value of the constant is unlikely to matter much though.\n\n## Setup\n\nWhen is it rational to vote? You're participating in an election with two possible outcomes, a beneficial outcome (FDR for instance) and a poor outcome (Mussolini!). The benefit of the beneficial outcome is $b$. The cost of participating in the election, be it walking to the election booth or signing up for a website, is $c$. The probability that your vote is decisive, i.e., the the election would have turned out differently had you decided not to vote, is $\\nu$. These quantities are summarized in @tbl-letters.\n\n| Letter | Interpretation                                                                                                    |\n|--------|-------------------------------------------------------------------------------------------------------------------|\n| $b$    | The benefit or utility should the beneficial outcome occur, e.g., should your favored candidate be elected.       |\n| $c$    | The cost of casting a vote. Driving to the election booth, getting out of bed before the booth closes, and so on. |\n| $\\nu$  | Probability that your vote is decisive. Also known as *voting power*.                                             |\n: Table explaining the meaning of $b$, $c$, $\\nu$ {#tbl-letters}\n\nIgnoring second-order effects such as signalling, it can easily be shown that voting is rationally justified if and only if $b/c>\\nu^{-1}$. \n\n::: {.callout-note icon=\"false\" appearance=\"simple\"}\n#### When is voting justified?\n\nVoting is justified if and only if the benefit-cost ratio $b/c$ is greater than the inverse of the voting power $$b/c>\\nu^{-1}.$$ {#eq-condition}\n:::\n\n::: {.callout-note collapse=\"true\"}\n#### Proof\n\nDefine the potential outcome $$X_{\\text{vote}}=\\begin{cases}\n1, & \\text{if your candidate wins,}\\\\\n0, & \\text{otherwise.}\n\\end{cases}$$ Define $X_{\\text{don't}}$ in the same way. Let $b$ be the benefit when your candidate wins and $c$ be the cost of voting. The expected utility of voting is \\begin{eqnarray*}\nEU_{\\text{vote}} & = & P(X_{\\text{vote}}=1)b-c,\\\\\nEU_{\\text{don't}} & = & P(X_{\\text{don't}}=0)b.\n\\end{eqnarray*} Voting is justified if and only if the expected utility of voting is greater than the expected utility of not voting, i.e., \\begin{eqnarray*}\nEU_{\\text{vote}}-EU_{\\text{don't}} & = & \\left[P(X_{\\text{vote}}=1)-P(X_{\\text{don't}}=0)\\right]b-c,\\\\\n & \\geq & 0.\n\\end{eqnarray*} Now define the voting power as $$\n\\nu=P(X_{\\text{vote}}=1)-P(X_{\\text{don't}}=0).$$ From these definitions it should be clear that voting is justified if and only if $b/c>\\nu.$\n::: \n\n\nI'm assuming you're able to estimate $b/c$ yourself; I'm focussing on how to model $\\nu$ in this post. \n### The binomial model\n\nIf we know the success probability of the binomial model equals $1/2$, the probability $p$ is approximately equal to $\\sqrt{2/\\pi}n^{-1/2}$. When draws are decided by a coin-toss, the probability of your vote being decisive is $\\nu = (2\\pi)^{-1/2}n^{-1/2}$.\n\n::: {.callout-note collapse=\"true\"}\n#### Proof that $\\nu \\approx (2\\pi)^{-1/2}n^{-1/2}$\nUsing $p=1/2$, your vote is decisive with probability \n\\begin{eqnarray*}\n\\frac{1}{2}\\binom{n}{n/2}p^{n/2}(1-p)^{n/2} & = & \\frac{1}{2}\\binom{n}{n/2}2^{-n/2}2{}^{-n/2},\\\\\n & = & \\frac{1}{2}\\binom{n}{n/2}2^{-n}.\n\\end{eqnarray*}\nUsing Stirling's approximation, \n\\begin{eqnarray*}\n\\binom{n}{n/2} & = & \\frac{n!}{(n/2)!^{2}}\\approx\\frac{\\sqrt{2\\pi n}\\left(\\frac{n}{e}\\right)^{n}}{\\left(\\sqrt{2\\pi n/2}\\left(\\frac{n/2}{e}\\right)^{n/2}\\right)^{2}}=\\frac{\\sqrt{2\\pi n}\\left(\\frac{n}{e}\\right)^{n}}{\\pi n\\left(\\frac{n/2}{e}\\right)^{n}},\\\\\n & = & \\sqrt{\\frac{2}{\\pi n}}2^{n},\\\\\n & = & \\sqrt{2/\\pi}n^{-1/2}2^{n}.\n\\end{eqnarray*}\nIt follows that\n\\begin{eqnarray*}\n\\frac{1}{2}\\binom{n}{n/2}x^{n/2}(1-x)^{n/2} & = & \\frac{1}{2}2^{-n}\\sqrt{2/\\pi}n^{-1/2}2^{n},\\\\\n & = & (2\\pi)^{-1/2}n^{-1/2}.\n\\end{eqnarray*}\n:::\n\nIt follows that you should vote if and only if $b/c \\geq 2\\pi n^{1/2}$.\n\nThe binomial model has several problems though.\n\n1. Empirical evidence doesn't support it [@Gelman2004-ea].\n2. The qualitative conclusion above holds only when $p=1/2$.\n3. It doesn't take uncertainty into account.\n\n### Barnett's argument\n\n## Compound binomial mdels\n\n### Beta-binomial model\n\nThe beta-binomial model is a model of two parameters $\\alpha>0$ and $\\beta>0$, illustrated in @fig-picture. It has probability mass function\n\n\n$$\nf(x;\\alpha, \\beta) = \\binom{n}{x}\\frac{B(x+\\alpha,n-x+\\beta)}{B(\\alpha,\\beta)},\n$$\n\n\nwhere $B$ is the [beta function](https://en.wikipedia.org/wiki/Beta_function).\n\n![The beta-binomial model (source: [wikipedia](https://commons.wikimedia.org/wiki/File:Beta-binomial_distribution_pmf.png)).](images/600px-Beta-binomial_distribution_pmf.png){#fig-picture fig-align=\"center\"}\n\nIts mean is $E(X) = n\\alpha/(\\alpha+\\beta)$ and its variance $$\\operatorname{Var}(X) =\\frac{n\\alpha\\beta(\\alpha+\\beta-n)}{(\\alpha+\\beta)^{2}(\\alpha+\\beta-1)}.$$Defining $p=\\alpha/(\\alpha+\\beta)$, we see that $E(X)=np$, just like a binomial distribution. But its variance is on the order $n^2$, in contrast to the binomial variance, which is on the order $n$.\n\nTwo observations from the beta-binomial are not independent, as can be verified using the law of total covariance and the [formulation of the beta-binomial as a compound distribution](https://en.wikipedia.org/wiki/Beta-binomial_distribution#As_a_compound_distribution).\n\nAssuming the compound binomial model, @Chamberlain1981-jp showed that, provided $n$ is sufficiently large,\n\n$$\n\\nu\\approx\\frac{1}{4}f\\left(\\frac{1}{2};\\theta\\right)n^{-1}.\n$$\n\nWe can easily make use of this result Since the beta-binomial is a compound binomial distribution with $f(p;\\alpha,\\beta)$ equal to the beta density.\n\n\n::: {.callout-note icon=\"false\" appearance=\"simple\"}\n::: {#prp-line}\nWhen $n$ is sufficiently large, the probability of equal number of votes is approximately equal to $$p=4\\frac{2^{-(\\alpha+\\beta)}}{B(\\alpha,\\beta)}n^{-1}.$$ {#eq-general} In particular, when $\\alpha=\\beta$, the probability is approximately equal to $$p=2\\sqrt{\\frac{\\alpha}{\\pi}}n^{-1}.$$ {#eq-special}\n:::\n:::\n\nCombining equation @eq-condition with @eq-special we find that it is rational to vote approximately when $$\\frac{b}{c} > \\sqrt{\\frac{\\pi}{\\alpha}}n.$$ {#eq-simple-formula} When $\\alpha\\to\\infty$, the beta-binomial converges to the binomial distribution. Loosely speaking, the approximation $\\sqrt{2/\\pi}n^{-1/2}$ will be better if the number of voters $n$ is small combared to your certainty about the success probability being close to $1/2$.\n\n#### Thinking about $\\alpha$\nIn the one-parameter model $\\alpha$ specifies the prior for $p$, which is centered at $1/2$. To choose a reasonable $\\alpha$, you might use e.g., quantile matching or the variance $\\frac{1}{4(2\\alpha+1)}$.\n\nMatching quantiles can be done using numerical optimization.\n\n::: {.cell hash='index_cache/html/unnamed-chunk-1_b7f80ce005b4c9f2224f7eaf01ad0108'}\n\n```{.r .cell-code}\n#' Match quantiles in a symmetric beta distribution.\n#' @param p,q The probability (p) and associated quantiles (q).\n#' @return The `alpha` parameter of a symmetric beta distribution.\nmatch <- \\(p, q) {\n  f <- \\(alpha) (pbeta(q, alpha, alpha, log.p = TRUE) - log(p))^2\n  optimize(f, c(0, 10000))$minimum  \n}\nmatch(0.1, 0.05)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 0.6658209\n```\n:::\n:::\n\n\n\n##### Using 538\nWe could use e.g. 538 to approximate $\\alpha$ using the Nevada Senate race. Suppose there are $n=1,000,000$ voters in Nevada. The uncertainty in the uncertainty is domiated by parameter uncetainty, \n\n#### Implications\n\n1.  There is a plausible model where the probability is proportional to $n^{-1}$ for any choice of parameters.\n2.  However, the proportionality constant shouldn't be ignored. If the parameters are unfavourable, their effect can dominate the effect of $n$. It looks like the error bars ($80\\%$ credibility) are approximately $45\\% - 55\\%$. \n\n\n::: {.cell hash='index_cache/html/unnamed-chunk-2_29c0d11a93325a4541c2b0f1d6669035'}\n\n```{.r .cell-code}\nmatch(0.45, 0.1)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 0.04942326\n```\n:::\n:::\n\n\nSo let's say $\\alpha = 81 = 9^2$ for simplicity. Then $\\sqrt{\\pi/9^2} = \\sqrt{\\pi} / 9\\approx 1/5$. And you should vote if $b/c \\geq 1/5 n \\approx 200,000$. Is it likely that $b/c$ is this high? I don't want to think about it right now, but -- maybe. The cost of voting is often small, and the reduction in existential risk attained by stopping a republican take-over can easily be larger than $200,000$ times as large as this cost, even if the probability of an effect is really,really small. (Thinking about this stuff is not my forte.)\n\n### What $n\\nu(\\alpha)$ looks like.\n\n\n::: {.cell hash='index_cache/html/unnamed-chunk-3_a48bb6139d0030785c62200ac8b35495'}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Plot of alpha vs scaled voting power.\"}\noptions(scipen=5) \ninv <- \\(x) pi/x^2\nalpha = c(0.1, 1000)\nplot(alpha, sqrt(pi/alpha), ylab = \"Rescaled voting power\", log = \"xy\", type = \"l\")\nabline(h = c(0.10, 0.20, 0.5, 1, 2),\n       v = inv(c(0.10, 0.20, 0.5, 1, 2)), lty = 2, col = \"grey\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\nInverting $c = \\sqrt{\\pi/\\alpha}$ we find that $\\alpha=\\pi/c^2$. The beta densities corresponding to the values of $c(\\alpha)$ above are shown below.\n\n\n::: {.cell layout-align=\"center\" hash='index_cache/html/unnamed-chunk-4_456f9cd363c35fdffcc3fb0b79bce4e4'}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Plotting beta densities\"}\nx = seq(0, 1, by = 0.001)\npalette(\"Okabe-Ito\")\nplot(x, dbeta(x, inv(0.1), inv(0.1)), type = \"l\", col = 1, lwd = 2,\n     xlab = \"x\", ylab = \"Density\")\nlines(x, dbeta(x, inv(0.2), inv(0.2)), type = \"l\", col = 2, lwd = 2)\nlines(x, dbeta(x, inv(0.5), inv(0.5)), type = \"l\", col = 3, lwd = 2)\nlines(x, dbeta(x, inv(1), inv(1)), type = \"l\", col = 4, lwd = 2)\nlines(x, dbeta(x, inv(2), inv(2)), type = \"l\", col = 5, lwd = 2)\nlegend(\"topleft\", col = 1:5, legend = c(0.10, 0.20, 0.5, 1, 2), lwd = 2, border = \"n\")\n```\n\n::: {.cell-output-display}\n![Plot of beta distributions corresponding to various normalized voting powers.](index_files/figure-html/unnamed-chunk-4-1.png){fig-align='center' width=672}\n:::\n:::\n\n\nEyeballing this, if you think the race is close, the black distribution looks reasonable to adopt as your prior on $p$. And then it's rational to vote if $10 b/c\\geq n$. \n\n## Elections: Senate and presidential\n\n\n::: {.cell hash='index_cache/html/unnamed-chunk-5_fc513256b87a219ce0f772d0971bc86c'}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Loading and modifying senate and presidential election data.\"}\npresident <- readr::read_csv(\"1976-2020-senate.csv\")\nsenate <- readr::read_csv(\"1976-2020-president.csv\")\n\ntrans <- \\(dat) {\n  trans <- \\(x) {\n    groups <- dplyr::group_by(x, year, state)\n    dplyr::filter(\n      groups, \n      candidatevotes == max(candidatevotes)\n    )    \n  }\n\n  democrat <- trans(dplyr::filter(dat, party_simplified == \"DEMOCRAT\"))\n  republican <- trans(dplyr::filter(dat, party_simplified == \"REPUBLICAN\"))\n  \n  list(\n    ns = democrat$candidatevotes + republican$candidatevotes, \n    votes = democrat$candidatevotes)\n}\n\nns_pr <- trans(president)$ns\nvotes_pr <- trans(president)$votes\nps_pr <- votes_pr / ns_pr\n\nns_sen <- trans(senate)$ns\nvotes_sen <- trans(senate)$votes\nps_sen <- votes_sen / ns_sen\n```\n:::\n\n::: {.cell hash='index_cache/html/unnamed-chunk-6_277bd4274ae2ada3daabf249a51743d7'}\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n::: {.cell hash='index_cache/html/unnamed-chunk-7_b451246ff4c0ad3ac024d55479b8ff40'}\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\n\n## What could go wrong?\n1. **Randomness in $n$.** We have treated $n$ as fixed. If $n$ is random *and* is strongly associated with $p$, our conclusions will not hold. \n\n2. **The binomial model is false.** The binomial is the best approximation to reality when dealing with exchangeable raters. But if we loosen up this demand we can have models such as \"$5000$ democrats, $5000$ republicans, and $1000$ undecided.\" Then $\\nu$ won't be proportional to $n$, but proportional to the $1000$ undecided instead. I doubt using a model like this would make a practical difference though, as the uncertainty in $p$ would likely increase dramatically.\n\n3. **Small $n$.** The asymptotics takes little time to kick, so I wouldn't worry unless dealing with an election with just a handful of voters ()\n\n\n## Conclusion\n\n## Appendix: Details\n\nFrom [Stirling's formula for the Beta distribution](https://en.wikipedia.org/wiki/Beta_function#Approximation) we find that\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}